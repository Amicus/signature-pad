<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <title>Regenerate a Signature Â· Signature Pad</title>
  <style>
    body { font: normal 100.01%/1.375 "Helvetica Neue",Helvetica,Arial,sans-serif; }
    p { margin: 0.515em 0 0; padding: 0 6px; }
  </style>
  <link href="../assets/jquery.signaturepad.css" rel="stylesheet">
  <!--[if lt IE 9]><script src="../assets/flashcanvas.js"></script><![endif]-->
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
</head>
<body>
  <div class="sigPad signed">
    <div class="sigWrapper">
      <div class="typed">Sir John A. Macdonald</div>
      <canvas class="pad" width="198" height="55"></canvas>
    </div>
    <p>Sir John A. Macdonald<br>July 1, 1867</p>
  </div>

  <script src="../jquery.signaturepad.js"></script>
  <script src="sample-signature-output.js"></script>
  <script>
    $(document).ready(function() {
      $('.sigPad').signaturePad({displayOnly:true}).regenerate(sig);
    });
  </script>
  <script src="../assets/json2.min.js"></script>
  <script src="http://numericjs.com/numeric/lib/numeric-1.2.6.min.js"></script>
  <script>
    q = [[1,2,3],
         [4,5,6],
         [7,3,9]];

    // M x B = C
    // M-1 x M x B = M-1 x C
    // I x B = M-1 x C

    var generate141Matrix = function(N) {
      result = [];
      for (var row = 0; row < N; row++) {
        var newRow = [];
        for (var col = 0; col < N; col++) {
          if (col == row) {
            newRow.push(4);
          } else if (Math.abs(row - col) == 1) {
            newRow.push(1);
          } else {
            newRow.push(0);
          };
        };
        result.push(newRow);
      }
      return result;
    };

    var M = generate141Matrix(3);

    var generateConstantMatrix = function (sampledPoints) {
      // given an vector of N points, this should return N-2 ordered pairs
      result = [];
      result.push(
        numeric.sub(numeric.mul(sampledPoints[1], 6),
        sampledPoints[0])
      );
      for (i = 2; i < sampledPoints.length - 2; i++) {
        result.push( numeric.mul(sampledPoints[i], 6) );
      }
      result.push(
        numeric.sub(numeric.mul(sampledPoints[sampledPoints.length - 2], 6),
        sampledPoints[sampledPoints.length - 1])
      );
      return result;
    }

    var sampledPoints = [[1,-1],
                         [-1,2],
                         [1,4],
                         [4,3],
                         [7,5]]
    var C = generateConstantMatrix(sampledPoints);
    var B = numeric.dot(numeric.inv(M), C);

    // B-spline control points also include the endpoints of the sampled data
    // These are the B Splines
    B.splice(0, 0, sampledPoints[0]);
    B.push(sampledPoints[sampledPoints.length - 1]);

  </script>
</body>
